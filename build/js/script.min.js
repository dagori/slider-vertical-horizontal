"use strict";var slider=document.querySelector(".slider"),vertical=document.querySelector(".vertical-container"),horizontal=document.querySelector(".horizontal-container"),radio=document.querySelector(".switcher-radio"),radioItem=radio.querySelectorAll("input"),scale=document.querySelector(".switcher-slider__scale"),thumb=document.querySelector(".switcher-slider__thumb"),currentIndex=0;function getCoords(e){var t=e.getBoundingClientRect();return{left:t.left+pageXOffset,top:t.top+pageYOffset,right:t.right+pageXOffset,bottom:t.bottom+pageYOffset}}function moveHorizontalSlides(){var e=parseFloat(getComputedStyle(thumb).left),t=scale.offsetWidth,r=slider.offsetWidth,o=t/4;return o<e&&(horizontal.style.transform="translateX(-".concat(r,"px)")),t-o<e&&(horizontal.style.transform="translateX(-".concat(r+r,"px)")),void(e<o&&(horizontal.style.transform="translateX(0px)"))}function moveVerticalSlides(e){currentIndex||(vertical.children[0].classList.remove("next"),vertical.children[1].style.backgroundPosition="center 20%, center");var t=vertical.children[currentIndex].offsetHeight*e;vertical.style.transform="translateY(".concat(-t,"px)"),console.log(currentIndex,e),2===currentIndex&&1===e&&(vertical.children[1].style.backgroundPosition="center 50%, center"),(currentIndex=e)||vertical.children[0].classList.add("next")}horizontal.style.width=parseFloat(getComputedStyle(slider).width)*horizontal.children.length+"px",document.ondragstart=function(){return!1},thumb.onmousedown=function(e){var t=getCoords(thumb),r=getCoords(scale),o=e.pageX-t.left;thumb.style.cursor="grabbing",document.onmousemove=function(e){var t=e.pageX-r.left-o;thumb.style.left=Math.max(0,Math.min(t,scale.offsetWidth-thumb.offsetWidth))+"px",moveHorizontalSlides()},document.onmouseup=function(){document.onmousemove=null,thumb.onmouseup=null,thumb.style.cursor="grab"}},radio.addEventListener("change",function(e){moveVerticalSlides(Array.from(radioItem).indexOf(e.target))}),vertical.addEventListener("mousedown",function(e){var t=e.target.closest(".slide");if(t&&!e.target.closest(".switcher-slider")&&!e.target.closest(".switcher-radio")){var r,o=Array.from(vertical.children).indexOf(t),n=e.pageY;vertical.addEventListener("mousemove",function(e){r=n-e.pageY,Math.abs(r)}),vertical.addEventListener("mouseup",function(){!t||e.target.closest(".switcher-slider")||e.target.closest(".switcher-radio")||(r<0&&0!==o&&(moveVerticalSlides(o-1),radioItem[o-1].checked=!0),0<r&&o!==vertical.children.length-1&&(moveVerticalSlides(o+1),radioItem[o+1].checked=!0),vertical.onmousemove=null,vertical.mouseup=null)})}}),vertical.addEventListener("touchstart",function(e){var t=e.target.closest(".slide");if(t&&!e.target.closest(".switcher-slider")&&!e.target.closest(".switcher-radio")){var r,o=Array.from(vertical.children).indexOf(t),n=e.pageY;vertical.addEventListener("touchmove",function(e){r=n-e.pageY,Math.abs(r)}),vertical.addEventListener("touchend",function(){!t||e.target.closest(".switcher-slider")||e.target.closest(".switcher-radio")||(r<0&&0!==o&&(moveVerticalSlides(o-1),radioItem[o-1].checked=!0),0<r&&o!==vertical.children.length-1&&(moveVerticalSlides(o+1),radioItem[o+1].checked=!0),vertical.ontouchmove=null,vertical.ontouchend=null)})}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzbGlkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ2ZXJ0aWNhbCIsImhvcml6b250YWwiLCJyYWRpbyIsInJhZGlvSXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJzY2FsZSIsInRodW1iIiwiZ2V0Q29vcmRzIiwiZWxlbSIsImNvb3JkcyIsImxlZnQiLCJwYWdlWE9mZnNldCIsInRvcCIsInBhZ2VZT2Zmc2V0IiwicmlnaHQiLCJtb3ZlSG9yaXpvbnRhbFNsaWRlcyIsImN1cnJlbnRQb3MiLCJnZXRDb21wdXRlZFN0eWxlIiwicGFyc2VGbG9hdCIsIndpZHRoIiwib2Zmc2V0V2lkdGgiLCJzdGVwIiwiZGl2aXNpb24iLCJjb25jYXQiLCJzdHlsZSIsInRyYW5zZm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJuZXdJbmRleCIsIm5leHRSYWRpb0luZGV4IiwibW92ZVZlcnRpY2FsU2xpZGVzIiwicmVtb3ZlIiwiY2hpbGRyZW4iLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJwb3NpdGlvbiIsIm9mZnNldEhlaWdodCIsImN1cnJlbnRJbmRleCIsImNsYXNzTGlzdCIsImNvbnNvbGUiLCJsZW5ndGgiLCJvbmRyYWdzdGFydCIsIm9ubW91c2Vkb3duIiwiZSIsInRodW1iUG9zIiwic2NhbGVQb3MiLCJwYWdlWCIsImN1cnNvciIsInNoaWZ0WCIsIk1hdGgiLCJtYXgiLCJtaW4iLCJuZXdQb3MiLCJBcnJheSIsImZyb20iLCJpbmRleE9mIiwidGFyZ2V0Iiwic2xpZGUiLCJjbG9zZXN0IiwiZGlmZiIsInNsaWRlSW5kZXgiLCJzdGFydCIsInBhZ2VZIiwiYWJzIiwiY2hlY2tlZCIsIm9ubW91c2Vtb3ZlIiwib250b3VjaGVuZCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFDQSxJQUFNQSxPQUFTQyxTQUFTQyxjQUFjLFdBQWhDRixTQUFTQyxTQUFTQyxjQUFjLHVCQUNoQ0MsV0FBV0YsU0FBU0MsY0FBYyx5QkFDbENFLE1B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QUUsUUFBQSxxQkFDSUQsRUFBRCxHQUEyQixJQUFmRCxJQUNYSSxtQkFBbUJOLEVBQWEsR0FDaENLLFVBQUpDLEVBQUEsR0FBQUksU0FBQSxHQUVTcEMsRUFBVDFCLEdBQVMwQixJQUFpQjFCLFNBQWErQixTQUFBTyxPQUFPLElBQzVDbUIsbUJBQWlCRyxFQUFqQixHQUNBekQsVUFBR3VELEVBQUgsR0FBeUJJLFNBQUEsR0FFM0I5RCxTQUFTMEIsWUFBVCxLQUNFMUIsU0FBSXVELFFBQVdELFdBR2JuRCxTQUFBQSxpQkFBb0IsYUFBcEIsU0FBQXNDLEdBQ0QsSUFBQWMsRUFBQWQsRUFBQWEsT0FBQUUsUUFBQSxVQVlILEdBQUlELElBQVNkLEVBQUVhLE9BQU9FLFFBQVEsc0JBQXVCZixFQUFFYSxPQUFPRSxRQUFRLG1CQUF0RSxDQVhFLElBQ0UzQixFQURGNkIsRUFBR1AsTUFBWU8sS0FBVTFELFNBQUtBLFVBQVMrQixRQUFTTyxHQUU5Q25DLEVBQUFBLEVBQVV1RCxNQUNYMUQsU0FBQTBCLGlCQUFBLFlBQUEsU0FBQWUsR0FhRGdCLEVBQU9FLEVBQVFsQixFQUFFbUIsTUFaakI1RCxLQUFRNkQsSUFBQ0UsS0FFVi9ELFNBWkQwQixpQkFBQSxXQUFBLFlBVkY2QixHQUFBZCxFQUFBYSxPQUFBRSxRQUFBLHFCQUFBZixFQUFBYSxPQUFBRSxRQUFBLHFCQXlCQXhELEVBQVMwQixHQUFpQixJQUFqQkEsSUFDSDZCLG1CQUFpQkMsRUFBUSxHQUMxQnJELFVBQVVzQyxFQUFTZSxHQUFUTSxTQUFpQixHQUU5QixFQUFJTCxHQUFKQyxJQUFBMUQsU0FBQStCLFNBQUFPLE9BQUEsSUFDSXFCLG1CQUFKRCxFQUFBLEdBQ0ExRCxVQUFTMEIsRUFBaUIsR0FBQW9DLFNBQWEsR0FFckM5RCxTQUFRNkQsWUFBWSxLQUZ0QjdELFNBQUFnRSxXQUFBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmNvbnN0IHNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXInKTtcclxuY29uc3QgdmVydGljYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtY29udGFpbmVyJyk7XHJcbmNvbnN0IGhvcml6b250YWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9yaXpvbnRhbC1jb250YWluZXInKTtcclxuY29uc3QgcmFkaW8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXItcmFkaW8nKTtcclxuY29uc3QgcmFkaW9JdGVtID0gcmFkaW8ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTtcclxuY29uc3Qgc2NhbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXItc2xpZGVyX19zY2FsZScpO1xyXG5jb25zdCB0aHVtYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2hlci1zbGlkZXJfX3RodW1iJyk7XHJcbnZhciBjdXJyZW50SW5kZXggPSAwO1xyXG5ob3Jpem9udGFsLnN0eWxlLndpZHRoID0gKHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZXIpLndpZHRoKSAqIGhvcml6b250YWwuY2hpbGRyZW4ubGVuZ3RoKSArICdweCc7XHJcblxyXG5kb2N1bWVudC5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldENvb3JkcyhlbGVtKSB7XHJcbiAgdmFyIGNvb3JkcyA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgcmV0dXJuIHtcclxuICAgIGxlZnQ6IGNvb3Jkcy5sZWZ0ICsgcGFnZVhPZmZzZXQsXHJcbiAgICB0b3A6IGNvb3Jkcy50b3AgKyBwYWdlWU9mZnNldCxcclxuICAgIHJpZ2h0OiBjb29yZHMucmlnaHQgKyBwYWdlWE9mZnNldCxcclxuICAgIGJvdHRvbTogY29vcmRzLmJvdHRvbSArIHBhZ2VZT2Zmc2V0XHJcbiAgfVxyXG59XHJcblxyXG4vLyDQn9C10YDQtdC00LLQuNC90YPRgtGMINCz0L7RgNC40LfQvtC90YLQsNC70YzQvdGL0Lkg0YHQu9Cw0LnQtNC10YBcclxuZnVuY3Rpb24gbW92ZUhvcml6b250YWxTbGlkZXMoKSB7XHJcbiAgdmFyIGN1cnJlbnRQb3MgPSBwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUodGh1bWIpLmxlZnQpO1xyXG4gIHZhciB3aWR0aCA9IHNjYWxlLm9mZnNldFdpZHRoO1xyXG4gIHZhciBzdGVwID0gc2xpZGVyLm9mZnNldFdpZHRoO1xyXG4gIHZhciBkaXZpc2lvbiA9IHdpZHRoLzQ7XHJcbiAgcmV0dXJuIChmdW5jdGlvbigpIHtcclxuICAgIGlmKGN1cnJlbnRQb3MgPiBkaXZpc2lvbikge1xyXG4gICAgICBob3Jpem9udGFsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0keyBzdGVwfXB4KWA7XHJcbiAgICB9XHJcbiAgICBpZihjdXJyZW50UG9zID4gd2lkdGggLSBkaXZpc2lvbikge1xyXG4gICAgICBob3Jpem9udGFsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0ke3N0ZXAgKyBzdGVwfXB4KWA7XHJcbiAgICB9XHJcbiAgICBpZihjdXJyZW50UG9zIDwgZGl2aXNpb24pIHtcclxuICAgICAgaG9yaXpvbnRhbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgwcHgpYDtcclxuICAgIH1cclxuICB9KSgpO1xyXG59XHJcblxyXG50aHVtYi5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGUpIHtcclxuICB2YXIgdGh1bWJQb3MgPSBnZXRDb29yZHModGh1bWIpO1xyXG4gIHZhciBzY2FsZVBvcyA9IGdldENvb3JkcyhzY2FsZSk7XHJcbiAgdmFyIHNoaWZ0WCA9IGUucGFnZVggLSB0aHVtYlBvcy5sZWZ0O1xyXG4gIHRodW1iLnN0eWxlLmN1cnNvciA9ICdncmFiYmluZyc7XHJcbiAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgbmV3UG9zID0gIGUucGFnZVggLSBzY2FsZVBvcy5sZWZ0IC0gc2hpZnRYO1xyXG4gICAgdGh1bWIuc3R5bGUubGVmdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG5ld1Bvcywgc2NhbGUub2Zmc2V0V2lkdGggLSB0aHVtYi5vZmZzZXRXaWR0aCkpICsgJ3B4JztcclxuICAgIG1vdmVIb3Jpem9udGFsU2xpZGVzKCk7XHJcbiAgfVxyXG4gIGRvY3VtZW50Lm9ubW91c2V1cCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgZG9jdW1lbnQub25tb3VzZW1vdmUgPSBudWxsO1xyXG4gICAgdGh1bWIub25tb3VzZXVwID0gbnVsbDtcclxuICAgIHRodW1iLnN0eWxlLmN1cnNvciA9ICdncmFiJztcclxuICB9XHJcbn1cclxuXHJcbi8v0J/QtdGA0LXQtNCy0LjQvdGD0YLRjCDQstC10YDRgtC40LrQsNC70YzQvdGL0Lkg0YHQu9Cw0LnQtNC10YBcclxucmFkaW8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuICB2YXIgbmV4dFJhZGlvSW5kZXggPSBBcnJheS5mcm9tKHJhZGlvSXRlbSkuaW5kZXhPZihlLnRhcmdldCk7XHJcbiAgbW92ZVZlcnRpY2FsU2xpZGVzKG5leHRSYWRpb0luZGV4KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBtb3ZlVmVydGljYWxTbGlkZXMobmV3SW5kZXgpIHtcclxuICBpZighY3VycmVudEluZGV4KSB7XHJcbiAgICB2ZXJ0aWNhbC5jaGlsZHJlblswXS5jbGFzc0xpc3QucmVtb3ZlKCduZXh0Jyk7XHJcbiAgICB2ZXJ0aWNhbC5jaGlsZHJlblsxXS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnY2VudGVyIDIwJSwgY2VudGVyJztcclxuICB9XHJcbiAgdmFyIHBvc2l0aW9uID0gdmVydGljYWwuY2hpbGRyZW5bY3VycmVudEluZGV4XS5vZmZzZXRIZWlnaHQgKiBuZXdJbmRleDtcclxuICB2ZXJ0aWNhbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWSgkey1wb3NpdGlvbn1weClgO1xyXG4gIGNvbnNvbGUubG9nKGN1cnJlbnRJbmRleCwgbmV3SW5kZXgpO1xyXG4gIGlmKGN1cnJlbnRJbmRleCA9PT0gMiAmJiBuZXdJbmRleCA9PT0gMSkge1xyXG4gICAgdmVydGljYWwuY2hpbGRyZW5bMV0uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJ2NlbnRlciA1MCUsIGNlbnRlcic7XHJcbiAgfVxyXG4gIGN1cnJlbnRJbmRleCA9IG5ld0luZGV4O1xyXG4gIGlmKCFuZXdJbmRleCkge1xyXG4gICAgdmVydGljYWwuY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnbmV4dCcpO1xyXG4gIH1cclxufTtcclxuXHJcbnZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChlKSA9PiB7XHJcbiAgdmFyIHNsaWRlID0gZS50YXJnZXQuY2xvc2VzdCgnLnNsaWRlJyk7XHJcbiAgaWYoIXNsaWRlIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJy5zd2l0Y2hlci1zbGlkZXInKSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuc3dpdGNoZXItcmFkaW8nKSkgcmV0dXJuO1xyXG4gIHZhciBzbGlkZUluZGV4ID0gQXJyYXkuZnJvbSh2ZXJ0aWNhbC5jaGlsZHJlbikuaW5kZXhPZihzbGlkZSk7XHJcbiAgdmFyIGRpZmY7XHJcbiAgdmFyIHN0YXJ0ID0gZS5wYWdlWTtcclxuICB2ZXJ0aWNhbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCAoZSkgPT4ge1xyXG4gICAgZGlmZiA9IHN0YXJ0IC0gZS5wYWdlWTtcclxuICAgIGlmKE1hdGguYWJzKGRpZmYpIDwgMTAwKSByZXR1cm47XHJcbiAgfSk7XHJcbiAgdmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsICgpID0+IHtcclxuICAgIGlmKCFzbGlkZSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuc3dpdGNoZXItc2xpZGVyJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnLnN3aXRjaGVyLXJhZGlvJykpIHJldHVybjtcclxuICAgIGlmKGRpZmYgPCAwICYmIHNsaWRlSW5kZXggIT09IDApIHtcclxuICAgICAgbW92ZVZlcnRpY2FsU2xpZGVzKHNsaWRlSW5kZXggLSAxKTtcclxuICAgICAgcmFkaW9JdGVtW3NsaWRlSW5kZXggLSAxXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGlmKGRpZmYgPiAwICYmIHNsaWRlSW5kZXggIT09IHZlcnRpY2FsLmNoaWxkcmVuLmxlbmd0aCAtIDEpIHtcclxuICAgICAgbW92ZVZlcnRpY2FsU2xpZGVzKHNsaWRlSW5kZXggKyAxKTtcclxuICAgICAgcmFkaW9JdGVtW3NsaWRlSW5kZXggKyAxXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIHZlcnRpY2FsLm9ubW91c2Vtb3ZlID0gbnVsbDtcclxuICAgIHZlcnRpY2FsLm1vdXNldXAgPSBudWxsO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbnZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xyXG4gIHZhciBzbGlkZSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zbGlkZScpO1xyXG4gIGlmKCFzbGlkZSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuc3dpdGNoZXItc2xpZGVyJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnLnN3aXRjaGVyLXJhZGlvJykpIHJldHVybjtcclxuICB2YXIgc2xpZGVJbmRleCA9IEFycmF5LmZyb20odmVydGljYWwuY2hpbGRyZW4pLmluZGV4T2Yoc2xpZGUpO1xyXG4gIHZhciBkaWZmO1xyXG4gIHZhciBzdGFydCA9IGUucGFnZVk7XHJcbiAgdmVydGljYWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHtcclxuICAgIGRpZmYgPSBzdGFydCAtIGUucGFnZVk7XHJcbiAgICBpZihNYXRoLmFicyhkaWZmKSA8IDEwMCkgcmV0dXJuO1xyXG4gIH0pO1xyXG4gIHZlcnRpY2FsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgKCkgPT4ge1xyXG4gICAgaWYoIXNsaWRlIHx8IGUudGFyZ2V0LmNsb3Nlc3QoJy5zd2l0Y2hlci1zbGlkZXInKSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuc3dpdGNoZXItcmFkaW8nKSkgcmV0dXJuO1xyXG4gICAgaWYoZGlmZiA8IDAgJiYgc2xpZGVJbmRleCAhPT0gMCkge1xyXG4gICAgICBtb3ZlVmVydGljYWxTbGlkZXMoc2xpZGVJbmRleCAtIDEpO1xyXG4gICAgICByYWRpb0l0ZW1bc2xpZGVJbmRleCAtIDFdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYoZGlmZiA+IDAgJiYgc2xpZGVJbmRleCAhPT0gdmVydGljYWwuY2hpbGRyZW4ubGVuZ3RoIC0gMSkge1xyXG4gICAgICBtb3ZlVmVydGljYWxTbGlkZXMoc2xpZGVJbmRleCArIDEpO1xyXG4gICAgICByYWRpb0l0ZW1bc2xpZGVJbmRleCArIDFdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgdmVydGljYWwub250b3VjaG1vdmUgPSBudWxsO1xyXG4gICAgdmVydGljYWwub250b3VjaGVuZCA9IG51bGw7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=

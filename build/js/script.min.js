"use strict";var slider=document.querySelector(".slider"),vertical=document.querySelector(".slider__vertical-container"),horizontal=document.querySelector(".slider__horizontal-container"),sliderVerticalWrapper=document.querySelector(".slider__wrapper"),vericalSlides=vertical.querySelectorAll(".slide"),radio=document.querySelector(".switcher-radio"),radioItem=radio.querySelectorAll("input"),scale=document.querySelector(".switcher-slider__scale"),thumb=document.querySelector(".switcher-slider__thumb");function getCoords(e){var t=e.getBoundingClientRect();return{left:t.left+pageXOffset,top:t.top+pageYOffset,right:t.right+pageXOffset,bottom:t.bottom+pageYOffset}}function moveHorizontalSlides(){var e=parseFloat(getComputedStyle(thumb).left),t=scale.offsetWidth,r=slider.offsetWidth,o=t/4;return o<e&&(horizontal.style.transform="translateX(-".concat(r,"px)")),t-o<e&&(horizontal.style.transform="translateX(-".concat(r+r,"px)")),void(e<o&&(horizontal.style.transform="translateX(0px)"))}horizontal.style.width=parseFloat(getComputedStyle(slider).width)*horizontal.children.length+"px",document.ondragstart=function(){return!1},thumb.onmousedown=function(e){var t=getCoords(thumb),r=getCoords(scale),o=e.pageX-t.left;thumb.style.cursor="grabbing",document.onmousemove=function(e){var t=e.pageX-r.left-o;thumb.style.left=Math.max(0,Math.min(t,scale.offsetWidth-thumb.offsetWidth))+"px",moveHorizontalSlides()},document.onmouseup=function(e){e.stopPropagation(e),document.onmousemove=null,thumb.style.cursor="grab"}};var diff,start,position,indexFrom=0;function moveVerticalSlides(e){indexFrom||(vericalSlides[0].classList.remove("next"),vericalSlides[1].style.backgroundPosition="center 20%, center"),2===indexFrom&&(vericalSlides[1].style.backgroundPosition="center 50%, center"),e||vericalSlides[0].classList.add("next"),position=vericalSlides[indexFrom].offsetHeight*e,vertical.style.transform="translateY(".concat(-position,"px)");var t="было: "+indexFrom+", видим: "+e;document.querySelector("button").textContent=document.querySelector("button").textContent+"  "+t,indexFrom=e}radio.addEventListener("change",function(e){var t=e.target;moveVerticalSlides(Array.from(radioItem).indexOf(t))}),sliderVerticalWrapper.addEventListener("mousedown",function(e){start=e.pageY,sliderVerticalWrapper.addEventListener("mouseup",function(e){e.stopImmediatePropagation(),diff=start-e.pageY,Math.abs(diff)<100||(diff<0&&0!==indexFrom&&(radioItem[indexFrom-1].checked=!0,moveVerticalSlides(indexFrom-1)),0<diff&&indexFrom!==vericalSlides.length-1&&(radioItem[indexFrom+1].checked=!0,moveVerticalSlides(indexFrom+1)),sliderVerticalWrapper.mouseup=null)})}),sliderVerticalWrapper.addEventListener("touchstart",function(e){var t=e.changedTouches[0];start=t.pageY,sliderVerticalWrapper.addEventListener("touchend",function(e){var t=e.changedTouches[0];diff=start-t.pageY,Math.abs(diff)<100||(alert(diff),diff<0&&0!==indexFrom&&(radioItem[indexFrom-1].checked=!0,moveVerticalSlides(indexFrom-1)),0<diff&&indexFrom!==vericalSlides.length-1&&(radioItem[indexFrom+1].checked=!0,moveVerticalSlides(indexFrom+1)))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJzbGlkZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ2ZXJ0aWNhbCIsImhvcml6b250YWwiLCJzbGlkZXJWZXJ0aWNhbFdyYXBwZXIiLCJyYWRpbyIsInJhZGlvSXRlbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0aHVtYiIsInN0eWxlIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImNvb3JkcyIsImVsZW0iLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJsZWZ0IiwidG9wIiwicGFnZVlPZmZzZXQiLCJyaWdodCIsImJvdHRvbSIsInBhZ2VYT2Zmc2V0IiwiY3VycmVudFBvcyIsIndpZHRoIiwicGFyc2VGbG9hdCIsIm9mZnNldFdpZHRoIiwic3RlcCIsImRpdmlzaW9uIiwidHJhbnNmb3JtIiwiY29uY2F0Iiwib25kcmFnc3RhcnQiLCJjaGlsZHJlbiIsImxlbmd0aCIsIm9ubW91c2Vkb3duIiwiZSIsImdldENvb3JkcyIsInNjYWxlUG9zIiwic2NhbGUiLCJ0aHVtYlBvcyIsImN1cnNvciIsInNoaWZ0WCIsInBhZ2VYIiwiTWF0aCIsIm1heCIsIm1pbiIsIm5ld1BvcyIsIm1vdmVIb3Jpem9udGFsU2xpZGVzIiwib25tb3VzZW1vdmUiLCJkaWZmIiwic3RhcnQiLCJwb3NpdGlvbiIsImluZGV4RnJvbSIsIm5leHRSYWRpb0luZGV4IiwiaW5kZXhUbyIsIm1vdmVWZXJ0aWNhbFNsaWRlcyIsInZlcmljYWxTbGlkZXMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJiYWNrZ3JvdW5kUG9zaXRpb24iLCJhZGQiLCJ0ZXh0IiwidGV4dENvbnRlbnQiLCJfcmVmIiwidGFyZ2V0IiwiQXJyYXkiLCJmcm9tIiwiaW5kZXhPZiIsInBhZ2VZIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFicyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImNoZWNrZWQiLCJ0b3VjaG9iaiIsImNoYW5nZWRUb3VjaGVzIiwiYWxlcnQiXSwibWFwcGlu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QUFRLE1BUHZCQSxLQUFBLEdBQUEsSUFBQUcsWUFFRDdDLFVBQUFBLFVBQXNCOEQsR0FBQUEsU0FBaUIsRUFDckNuQixtQkFBQUUsVUFBQSxJQUVJbUIsRUFBQUEsTUFBQUEsWUFBRmYsY0FBQXZCLE9BQUEsSUFDQWdCLFVBQVlHLFVBQVosR0FBQW9CLFNBQUEsRUFDQWpCLG1CQUFvQkgsVUFBSyxJQUN6QjdDLHNCQUFlNkMsUUFBZixVQVlKN0Msc0JBQXNCOEQsaUJBQWlCLGFBQWMsU0FBU2xDLEdBUjFELElBQUFzQyxFQUFHdEMsRUFBQXVDLGVBQTBCbEIsR0FDM0IvQyxNQUFBQSxFQUFVMkMsTUFDVkcsc0JBQWtCYyxpQkFBbEIsV0FBQSxTQUFBbEMsR0FDRCxJQUFBc0MsRUFBQXRDLEVBQUF1QyxlQUFBLEdBVUR6QixLQUFLQyxNQUFNdUIsRUFBU0wsTUFUcEI3RCxLQUFBQSxJQUFBQSxNQUFBQSxNQVpGb0UsTUFBQTFCLE1BRkZBLEtBQUEsR0FBQSxJQUFBRyxZQWtCQTdDLFVBQUFBLFVBQXNCOEQsR0FBQUEsU0FBaUIsRUFDakNJLG1CQUFhQyxVQUFqQixJQUVBbkUsRUFBQUEsTUFBQUEsWUFBc0I4RCxjQUFpQnBDLE9BQVksSUFDakR4QixVQUFZMkMsVUFBS3NCLEdBQUFBLFNBQWpCLEVBQ0F6QixtQkFBV3dCLFVBQVgiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcclxuY29uc3Qgc2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcicpO1xyXG5jb25zdCB2ZXJ0aWNhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zbGlkZXJfX3ZlcnRpY2FsLWNvbnRhaW5lcicpO1xyXG5jb25zdCBob3Jpem9udGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9faG9yaXpvbnRhbC1jb250YWluZXInKTtcclxuY29uc3Qgc2xpZGVyVmVydGljYWxXcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fd3JhcHBlcicpO1xyXG5jb25zdCB2ZXJpY2FsU2xpZGVzID0gdmVydGljYWwucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlJyk7XHJcblxyXG5jb25zdCByYWRpbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2hlci1yYWRpbycpO1xyXG5jb25zdCByYWRpb0l0ZW0gPSByYWRpby5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCcpO1xyXG5cclxuY29uc3Qgc2NhbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3dpdGNoZXItc2xpZGVyX19zY2FsZScpO1xyXG5jb25zdCB0aHVtYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zd2l0Y2hlci1zbGlkZXJfX3RodW1iJyk7XHJcblxyXG5ob3Jpem9udGFsLnN0eWxlLndpZHRoID0gKHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZShzbGlkZXIpLndpZHRoKSAqIGhvcml6b250YWwuY2hpbGRyZW4ubGVuZ3RoKSArICdweCc7XHJcblxyXG5kb2N1bWVudC5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gIHJldHVybiBmYWxzZTtcclxufTtcclxuLy/Qn9C+0LvRg9GH0LjRgtGMINC60L7QvtGA0LTQuNC90LDRgtGLINGN0LvQtdC80LXQvdGC0LBcclxuZnVuY3Rpb24gZ2V0Q29vcmRzKGVsZW0pIHtcclxuICB2YXIgY29vcmRzID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICByZXR1cm4ge1xyXG4gICAgbGVmdDogY29vcmRzLmxlZnQgKyBwYWdlWE9mZnNldCxcclxuICAgIHRvcDogY29vcmRzLnRvcCArIHBhZ2VZT2Zmc2V0LFxyXG4gICAgcmlnaHQ6IGNvb3Jkcy5yaWdodCArIHBhZ2VYT2Zmc2V0LFxyXG4gICAgYm90dG9tOiBjb29yZHMuYm90dG9tICsgcGFnZVlPZmZzZXRcclxuICB9XHJcbn1cclxuXHJcbi8vINCf0LXRgNC10LTQstC40L3Rg9GC0Ywg0LPQvtGA0LjQt9C+0L3RgtCw0LvRjNC90YvQuSDRgdC70LDQudC00LXRgFxyXG5mdW5jdGlvbiBtb3ZlSG9yaXpvbnRhbFNsaWRlcygpIHtcclxuICB2YXIgY3VycmVudFBvcyA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aHVtYikubGVmdCk7XHJcbiAgdmFyIHdpZHRoID0gc2NhbGUub2Zmc2V0V2lkdGg7XHJcbiAgdmFyIHN0ZXAgPSBzbGlkZXIub2Zmc2V0V2lkdGg7XHJcbiAgdmFyIGRpdmlzaW9uID0gd2lkdGgvNDtcclxuICByZXR1cm4gKGZ1bmN0aW9uKCkge1xyXG4gICAgaWYoY3VycmVudFBvcyA+IGRpdmlzaW9uKSB7XHJcbiAgICAgIGhvcml6b250YWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7IHN0ZXB9cHgpYDtcclxuICAgIH1cclxuICAgIGlmKGN1cnJlbnRQb3MgPiB3aWR0aCAtIGRpdmlzaW9uKSB7XHJcbiAgICAgIGhvcml6b250YWwuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7c3RlcCArIHN0ZXB9cHgpYDtcclxuICAgIH1cclxuICAgIGlmKGN1cnJlbnRQb3MgPCBkaXZpc2lvbikge1xyXG4gICAgICBob3Jpem9udGFsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKDBweClgO1xyXG4gICAgfVxyXG4gIH0pKCk7XHJcbn1cclxuXHJcbnRodW1iLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSkgey8vaGFuZGxlU3RhcnQsIGhhbmRsZUVuZFxyXG4gIHZhciB0aHVtYlBvcyA9IGdldENvb3Jkcyh0aHVtYik7XHJcbiAgdmFyIHNjYWxlUG9zID0gZ2V0Q29vcmRzKHNjYWxlKTtcclxuICB2YXIgc2hpZnRYID0gZS5wYWdlWCAtIHRodW1iUG9zLmxlZnQ7XHJcbiAgdGh1bWIuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJztcclxuICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBuZXdQb3MgPSAgZS5wYWdlWCAtIHNjYWxlUG9zLmxlZnQgLSBzaGlmdFg7XHJcbiAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4obmV3UG9zLCBzY2FsZS5vZmZzZXRXaWR0aCAtIHRodW1iLm9mZnNldFdpZHRoKSkgKyAncHgnO1xyXG4gICAgbW92ZUhvcml6b250YWxTbGlkZXMoKTtcclxuICB9XHJcbiAgZG9jdW1lbnQub25tb3VzZXVwID0gZnVuY3Rpb24oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oZSk7XHJcbiAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IG51bGw7XHJcbiAgICB0aHVtYi5zdHlsZS5jdXJzb3IgPSAnZ3JhYic7XHJcbiAgfVxyXG59XHJcblxyXG4vL9Cf0LXRgNC10LTQstC40L3Rg9GC0Ywg0LLQtdGA0YLQuNC60LDQu9GM0L3Ri9C5INGB0LvQsNC50LTQtdGAXHJcbnZhciBpbmRleEZyb20gPSAwO1xyXG52YXIgZGlmZjtcclxudmFyIHN0YXJ0O1xyXG52YXIgcG9zaXRpb247XHJcblxyXG5yYWRpby5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoe3RhcmdldH0pID0+IHtcclxuICB2YXIgbmV4dFJhZGlvSW5kZXggPSBBcnJheS5mcm9tKHJhZGlvSXRlbSkuaW5kZXhPZih0YXJnZXQpO1xyXG4gIG1vdmVWZXJ0aWNhbFNsaWRlcyhuZXh0UmFkaW9JbmRleCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gbW92ZVZlcnRpY2FsU2xpZGVzKGluZGV4VG8pIHtcclxuICBpZighaW5kZXhGcm9tKSB7XHJcbiAgICB2ZXJpY2FsU2xpZGVzWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ25leHQnKTtcclxuICAgIHZlcmljYWxTbGlkZXNbMV0uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJ2NlbnRlciAyMCUsIGNlbnRlcic7XHJcbiAgfVxyXG4gIGlmKGluZGV4RnJvbSA9PT0gMikge1xyXG4gICAgdmVyaWNhbFNsaWRlc1sxXS5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSAnY2VudGVyIDUwJSwgY2VudGVyJztcclxuICB9XHJcbiAgaWYoIWluZGV4VG8pIHtcclxuICAgIHZlcmljYWxTbGlkZXNbMF0uY2xhc3NMaXN0LmFkZCgnbmV4dCcpO1xyXG4gIH1cclxuICBwb3NpdGlvbiA9IHZlcmljYWxTbGlkZXNbaW5kZXhGcm9tXS5vZmZzZXRIZWlnaHQgKiBpbmRleFRvO1xyXG4gIHZlcnRpY2FsLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVZKCR7LXBvc2l0aW9ufXB4KWA7XHJcblxyXG4gIHZhciB0ZXh0ID0gJ9Cx0YvQu9C+OiAnICsgaW5kZXhGcm9tICsgJywg0LLQuNC00LjQvDogJyArIGluZGV4VG87XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYnV0dG9uJykudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdidXR0b24nKS50ZXh0Q29udGVudCArIFwiICBcIiArIHRleHQ7XHJcbiAgaW5kZXhGcm9tID0gaW5kZXhUbztcclxufTtcclxuXHJcbnNsaWRlclZlcnRpY2FsV3JhcHBlci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZSkgPT4ge1xyXG4gIHN0YXJ0ID0gZS5wYWdlWTtcclxuICBzbGlkZXJWZXJ0aWNhbFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIChlKSA9PiB7XHJcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgZGlmZiA9IHN0YXJ0IC0gZS5wYWdlWTtcclxuICAgIGlmKE1hdGguYWJzKGRpZmYpIDwgMTAwKSByZXR1cm47XHJcbiAgICBpZihkaWZmIDwgMCAmJiBpbmRleEZyb20gIT09IDApIHtcclxuICAgICAgcmFkaW9JdGVtW2luZGV4RnJvbSAtIDFdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICBtb3ZlVmVydGljYWxTbGlkZXMoaW5kZXhGcm9tIC0gMSk7XHJcbiAgICB9XHJcbiAgICBpZihkaWZmID4gMCAmJiBpbmRleEZyb20gIT09IHZlcmljYWxTbGlkZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICByYWRpb0l0ZW1baW5kZXhGcm9tICsgMV0uY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgIG1vdmVWZXJ0aWNhbFNsaWRlcyhpbmRleEZyb20gKyAxKTtcclxuICAgIH1cclxuICAgIHNsaWRlclZlcnRpY2FsV3JhcHBlci5tb3VzZXVwID0gbnVsbDtcclxuICB9KTtcclxufSk7XHJcblxyXG5zbGlkZXJWZXJ0aWNhbFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGUpe1xyXG4gIHZhciB0b3VjaG9iaiA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgc3RhcnQgPSB0b3VjaG9iai5wYWdlWTtcclxuICBzbGlkZXJWZXJ0aWNhbFdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBmdW5jdGlvbihlKXtcclxuICAgIHZhciB0b3VjaG9iaiA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XHJcbiAgICBkaWZmPXN0YXJ0LXRvdWNob2JqLnBhZ2VZO1xyXG4gICAgaWYoTWF0aC5hYnMoZGlmZikgPCAxMDApIHJldHVybjtcclxuICAgIGFsZXJ0KGRpZmYpO1xyXG4gICAgaWYoZGlmZiA8IDAgJiYgaW5kZXhGcm9tICE9PSAwKSB7XHJcbiAgICAgIHJhZGlvSXRlbVtpbmRleEZyb20gLSAxXS5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgbW92ZVZlcnRpY2FsU2xpZGVzKGluZGV4RnJvbSAtIDEpO1xyXG4gICAgfVxyXG4gICAgaWYoZGlmZiA+IDAgJiYgaW5kZXhGcm9tICE9PSB2ZXJpY2FsU2xpZGVzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgcmFkaW9JdGVtW2luZGV4RnJvbSArIDFdLmNoZWNrZWQgPSB0cnVlO1xyXG4gICAgICBtb3ZlVmVydGljYWxTbGlkZXMoaW5kZXhGcm9tICsgMSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=
